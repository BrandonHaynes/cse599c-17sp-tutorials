SELECT  `comments`.`thread_id` FROM `comments`  WHERE `comments`.`user_id` = 1 GROUP BY `comments`.`thread_id`  ORDER BY MAX(created_at) DESC LIMIT 20;

SELECT  `comments`.* FROM `comments`  WHERE `comments`.`is_deleted` = 0 AND `comments`.`is_moderated` = 0 AND (story_id NOT IN (SELECT story_id FROM hidden_stories WHERE user_id = 1))  ORDER BY created_at DESC LIMIT 20 OFFSET 0;

SELECT  `stories`.* FROM `stories`  WHERE `stories`.`merged_story_id` IS NULL AND `stories`.`is_expired` = 0 AND ((CAST(upvotes AS signed) - CAST(downvotes AS signed)) >= -1) AND `stories`.`id` IN (SELECT `taggings`.`story_id` FROM `taggings`  WHERE `taggings`.`tag_id` = 2)  ORDER BY stories.created_at DESC LIMIT 26 OFFSET 0;

SELECT `stories`.`id`, `stories`.`upvotes`, `stories`.`downvotes`, `stories`.`user_id` FROM `stories`  WHERE `stories`.`merged_story_id` IS NULL AND `stories`.`is_expired` = 0 AND (`stories`.`id` NOT IN (SELECT `hidden_stories`.`story_id` FROM `hidden_stories`  WHERE `hidden_stories`.`user_id` = 1)) AND (`stories`.`id` NOT IN (SELECT `taggings`.`story_id` FROM `taggings`  WHERE `taggings`.`tag_id` IN (2, 6, 8, 12))) AND (`stories`.`created_at` > '2017-02-19 03:39:09')  ORDER BY stories.id DESC, stories.created_at DESC;

SELECT  `tags`.* FROM `tags` INNER JOIN `taggings` ON `taggings`.`tag_id` = `tags`.`id` INNER JOIN `stories` ON `stories`.`id` = `taggings`.`story_id` WHERE `tags`.`inactive` = 0 AND 
`stories`.`user_id` = 27 GROUP BY `tags`.`id`  ORDER BY COUNT(*) desc LIMIT 1;

